{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import{toursAPI}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CreateTour=()=>{var _formData$flightVendo;const navigate=useNavigate();const[step,setStep]=useState(1);const[tourType,setTourType]=useState('B2C');// B2C or B2B\nconst[packageType,setPackageType]=useState('Full');// Full or Partial\nconst{id}=useParams();const isEdit=!!id;const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState(false);const[fetching,setFetching]=useState(isEdit);const includedRef=useRef(null);const notIncludedRef=useRef(null);const fileInputRef=useRef(null);const[formData,setFormData]=useState({title:'',fromCity:'Tashkent',toCity:'',duration:'7 days',startDate:new Date().toISOString().split('T')[0],isVisaRequired:false,visaInfo:'',description:'',flightVendors:[],included:[],notIncluded:[],itinerary:[{day:1,title:'',description:''}],hotels:[],capacity:20,priceAdult:0,priceChild:0,agencyCommission:0,images:[]});useEffect(()=>{if(isEdit){fetchTourDetails();}},[id]);const fetchTourDetails=async()=>{setFetching(true);try{const tour=await toursAPI.getById(id);setFormData({...tour,startDate:tour.startDate?new Date(tour.startDate).toISOString().split('T')[0]:new Date().toISOString().split('T')[0],flightVendors:tour.flightVendors||[],included:tour.included||[],notIncluded:tour.notIncluded||[],itinerary:tour.itinerary||[{day:1,title:'',description:''}],hotels:tour.hotels||[],images:tour.images||[]});setTourType(tour.tourType||'B2C');setPackageType(tour.packageType||'Full');}catch(err){setError('Failed to fetch tour details');}finally{setFetching(false);}};const flightVendorsList=['Uzbekistan Airways','Turkish Airlines','Fly Dubai','Air Arabia','Qatar Airways'];const handleNext=()=>setStep(prev=>prev+1);const handlePrev=()=>setStep(prev=>prev-1);const toggleVendor=vendor=>{setFormData(prev=>({...prev,flightVendors:prev.flightVendors.includes(vendor)?prev.flightVendors.filter(v=>v!==vendor):[...prev.flightVendors,vendor]}));};const addListItem=(field,value)=>{if(!value.trim())return;setFormData(prev=>({...prev,[field]:[...prev[field],value.trim()]}));};const removeListItem=(field,index)=>{setFormData(prev=>({...prev,[field]:prev[field].filter((_,i)=>i!==index)}));};const handlePublish=async()=>{setLoading(true);setError('');try{const tourData={...formData,tourType,packageType,priceAdult:Number(formData.priceAdult),priceChild:Number(formData.priceChild),capacity:Number(formData.capacity),agencyCommission:Number(formData.agencyCommission),status:'Active'};if(isEdit){await toursAPI.update(id,tourData);}else{await toursAPI.create(tourData);}setSuccess(true);setTimeout(()=>navigate('/admin/tours'),2000);}catch(err){setError(err.message||\"Failed to \".concat(isEdit?'update':'create',\" tour\"));}finally{setLoading(false);}};const addItineraryDay=()=>{setFormData(prev=>({...prev,itinerary:[...prev.itinerary,{day:prev.itinerary.length+1,title:'',description:''}]}));};const removeItineraryDay=index=>{const newItinerary=formData.itinerary.filter((_,i)=>i!==index).map((item,i)=>({...item,day:i+1}));// Re-index days\nsetFormData(prev=>({...prev,itinerary:newItinerary}));};const handleItineraryChange=(index,field,value)=>{const newItinerary=[...formData.itinerary];newItinerary[index]={...newItinerary[index],[field]:value};setFormData(prev=>({...prev,itinerary:newItinerary}));};const handleFileUpload=async e=>{const files=Array.from(e.target.files);if(files.length===0)return;const uploadData=new FormData();files.forEach(file=>uploadData.append('images',file));setLoading(true);try{const token=localStorage.getItem('token');const response=await fetch('http://localhost:5000/api/upload/multiple',{method:'POST',headers:{'Authorization':\"Bearer \".concat(token)},body:uploadData});const data=await response.json();if(response.ok){setFormData(prev=>({...prev,images:[...prev.images,...data.urls]}));}else{setError(data.message||'Upload failed');}}catch(err){setError('Failed to upload images');}finally{setLoading(false);}};const removeImage=index=>{setFormData(prev=>({...prev,images:prev.images.filter((_,i)=>i!==index)}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"fw-bold m-0\",children:isEdit?'Edit Tour':'Create New Tour'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted small\",children:isEdit?'Modify existing travel package':'Design and publish a new travel package'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex gap-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group shadow-sm\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm \".concat(tourType==='B2C'?'btn-primary':'btn-outline-primary'),onClick:()=>setTourType('B2C'),children:\"Public (B2C)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm \".concat(tourType==='B2B'?'btn-primary':'btn-outline-primary'),onClick:()=>setTourType('B2B'),children:\"Agency (B2B)\"})]})})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-exclamation-circle me-2\"}),error]}),success&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-check-circle me-2\"}),\"Tour \",isEdit?'updated':'created',\" successfully! Redirecting...\"]}),fetching?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Loading tour details...\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm p-4 rounded-4 bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-5 px-5 position-relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute top-50 start-0 end-0 border-top translate-middle-y\",style:{zIndex:0}}),[1,2,3,4,5].map(num=>/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",style:{zIndex:1},children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-circle d-flex align-items-center justify-content-center fw-bold transition \".concat(step>=num?'bg-primary text-white shadow':'bg-light text-muted border'),style:{width:'40px',height:'40px'},children:num}),/*#__PURE__*/_jsx(\"span\",{className:\"position-absolute start-50 translate-middle-x mt-2 x-small fw-bold text-nowrap\",children:num===1?'Basic':num===2?'Logistics':num===3?'Itinerary':num===4?'Pricing':'Media'})]},num))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[step===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fadeIn\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"fw-bold mb-4\",children:\"Step 1: Basic & Routing\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"TOUR TITLE\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control bg-light border-0 py-2\",placeholder:\"e.g. Istanbul Magic & Shopping\",value:formData.title,onChange:e=>setFormData({...formData,title:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"FROM (ORIGIN)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control bg-light border-0 py-2\",value:formData.fromCity,onChange:e=>setFormData({...formData,fromCity:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"TO (DESTINATION)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control bg-light border-0 py-2\",placeholder:\"e.g. Antalya\",value:formData.toCity,onChange:e=>setFormData({...formData,toCity:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"DURATION\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control bg-light border-0 py-2\",placeholder:\"e.g. 7 days / 6 nights\",value:formData.duration,onChange:e=>setFormData({...formData,duration:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"START DATE\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control bg-light border-0 py-2\",value:formData.startDate,onChange:e=>setFormData({...formData,startDate:e.target.value})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-switch p-3 bg-light rounded-3 border\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input ms-0 me-2\",type:\"checkbox\",id:\"visaSwitch\",checked:formData.isVisaRequired,onChange:e=>setFormData({...formData,isVisaRequired:e.target.checked})}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label fw-bold text-muted small\",htmlFor:\"visaSwitch\",children:\"VISA IS REQUIRED FOR THIS TOUR\"})]})}),formData.isVisaRequired&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 animate-fadeIn\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"VISA ADDITIONAL INFO\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control bg-light border-0 py-2\",placeholder:\"e.g. Visa fee $50, process takes 5 days\",value:formData.visaInfo,onChange:e=>setFormData({...formData,visaInfo:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"DESCRIPTION\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control bg-light border-0 py-2\",rows:\"4\",placeholder:\"Describe the tour highlights...\",value:formData.description,onChange:e=>setFormData({...formData,description:e.target.value})})]})]})]}),step===2&&/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fadeIn\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"fw-bold mb-4\",children:\"Step 2: Logistics & Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted d-block\",children:\"PACKAGE TYPE\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border rounded-3 flex-grow-1 cursor-pointer transition \".concat(packageType==='Full'?'border-primary bg-primary-subtle':'bg-light'),onClick:()=>setPackageType('Full'),children:[/*#__PURE__*/_jsx(\"h6\",{className:\"fw-bold mb-1\",children:\"Full Package\"}),/*#__PURE__*/_jsx(\"p\",{className:\"x-small text-muted mb-0\",children:\"Fixed flight + hotel bundle\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border rounded-3 flex-grow-1 cursor-pointer transition \".concat(packageType==='Partial'?'border-primary bg-primary-subtle':'bg-light'),onClick:()=>setPackageType('Partial'),children:[/*#__PURE__*/_jsx(\"h6\",{className:\"fw-bold mb-1\",children:\"Custom/Partial\"}),/*#__PURE__*/_jsx(\"p\",{className:\"x-small text-muted mb-0\",children:\"Select multiple options\"})]})]})]}),tourType==='B2B'&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"AVAILABLE FLIGHT VENDORS\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap gap-2\",children:flightVendorsList.map(vendor=>/*#__PURE__*/_jsx(\"div\",{className:\"badge rounded-pill px-3 py-2 cursor-pointer border transition \".concat(formData.flightVendors.includes(vendor)?'bg-primary border-primary':'bg-light text-dark border-secondary-subtle'),onClick:()=>toggleVendor(vendor),children:vendor},vendor))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"PRICE INCLUDES\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{ref:includedRef,type:\"text\",className:\"form-control bg-light border-0\",placeholder:\"e.g. Breakfast, Transfer\",onKeyDown:e=>{if(e.key==='Enter'){e.preventDefault();addListItem('included',e.target.value);e.target.value='';}}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",type:\"button\",onClick:()=>{var _includedRef$current;const value=(_includedRef$current=includedRef.current)===null||_includedRef$current===void 0?void 0:_includedRef$current.value;addListItem('included',value);if(includedRef.current)includedRef.current.value='';},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap gap-2\",children:formData.included.map((item,i)=>/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-success-subtle text-success border border-success-subtle d-flex align-items-center gap-2\",children:[item,/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-times cursor-pointer\",onClick:()=>removeListItem('included',i)})]},i))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"PRICE EXCLUDES (EXTRA)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{ref:notIncludedRef,type:\"text\",className:\"form-control bg-light border-0\",placeholder:\"e.g. Visa, Personal expenses\",onKeyDown:e=>{if(e.key==='Enter'){e.preventDefault();addListItem('notIncluded',e.target.value);e.target.value='';}}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger\",type:\"button\",onClick:()=>{var _notIncludedRef$curre;const value=(_notIncludedRef$curre=notIncludedRef.current)===null||_notIncludedRef$curre===void 0?void 0:_notIncludedRef$curre.value;addListItem('notIncluded',value);if(notIncludedRef.current)notIncludedRef.current.value='';},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap gap-2\",children:formData.notIncluded.map((item,i)=>/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-danger-subtle text-danger border border-danger-subtle d-flex align-items-center gap-2\",children:[item,/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-times cursor-pointer\",onClick:()=>removeListItem('notIncluded',i)})]},i))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"TOTAL PLACES (CAPACITY)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control bg-light border-0 py-2\",value:formData.capacity,onChange:e=>setFormData({...formData,capacity:e.target.value})})]})]})]}),step===3&&/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fadeIn\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"fw-bold m-0\",children:\"Step 3: Tour Itinerary\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-outline-primary rounded-pill px-3\",onClick:addItineraryDay,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus me-2\"}),\"Add Day\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"accordion\",id:\"itineraryAccordion\",children:formData.itinerary.map((day,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"card border mb-3 shadow-sm overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header bg-white border-bottom-0 p-3 d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center flex-grow-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-primary-subtle text-primary rounded-circle d-flex align-items-center justify-content-center fw-bold me-3\",style:{width:'32px',height:'32px'},children:day.day}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm border-0 fw-bold bg-transparent shadow-none\",placeholder:\"Day \".concat(day.day,\" Title (e.g. Arrival)\"),value:day.title,onChange:e=>handleItineraryChange(index,'title',e.target.value)})]}),formData.itinerary.length>1&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link text-danger p-0 ms-2\",onClick:()=>removeItineraryDay(index),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-0 border-top\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control border-0 p-3 bg-light\",rows:\"3\",placeholder:\"Detailed description of activities...\",value:day.description,onChange:e=>handleItineraryChange(index,'description',e.target.value)})})]},index))})]}),step===4&&/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fadeIn\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"fw-bold mb-4\",children:\"Step 4: Pricing Strategy\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"ADULT PRICE ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control bg-light border-0 py-2\",value:formData.priceAdult,onChange:e=>setFormData({...formData,priceAdult:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"CHILD PRICE ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control bg-light border-0 py-2\",value:formData.priceChild,onChange:e=>setFormData({...formData,priceChild:e.target.value})})]}),tourType==='B2B'&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label small fw-bold text-muted\",children:\"AGENCY COMMISSION ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control bg-primary-subtle border-primary-subtle py-2 fw-bold\",value:formData.agencyCommission,onChange:e=>setFormData({...formData,agencyCommission:e.target.value})}),/*#__PURE__*/_jsx(\"p\",{className:\"x-small text-muted mt-1\",children:\"This amount will be deducted for B2B partners.\"})]})]})]}),step===5&&/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fadeIn\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"fw-bold mb-4\",children:\"Step 5: Media Gallery\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-4 p-5 text-center bg-light cursor-pointer hover-bg-light transition mb-4\",onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,className:\"d-none\",multiple:true,accept:\"image/*\",onChange:handleFileUpload}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-cloud-upload-alt fs-1 text-primary mb-3\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"fw-bold\",children:\"Upload Tour Photos\"}),/*#__PURE__*/_jsx(\"p\",{className:\"small text-muted\",children:\"Upload high-quality images of the destination\"})]}),formData.images.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"row g-3\",children:formData.images.map((url,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative rounded-3 overflow-hidden border shadow-sm group\",children:[/*#__PURE__*/_jsx(\"img\",{src:url.startsWith('http')?url:\"http://localhost:5000\".concat(url),alt:\"Tour\",className:\"img-fluid w-100\",style:{height:'150px',objectFit:'cover'}}),/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute top-0 end-0 p-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm rounded-circle\",onClick:e=>{e.stopPropagation();removeImage(index);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-times\"})})})]})},index))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mt-5 pt-4 border-top\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light rounded-pill px-4\",disabled:step===1,onClick:handlePrev,children:\"Back\"}),step<5?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary rounded-pill px-5 shadow\",onClick:handleNext,children:\"Next Step\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success rounded-pill px-5 shadow\",onClick:handlePublish,disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\"}),isEdit?'Saving...':'Publishing...']}):/*#__PURE__*/_jsx(_Fragment,{children:isEdit?'Save Changes':'Publish Tour'})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm p-4 rounded-4 bg-white sticky-top\",style:{top:'100px'},children:[/*#__PURE__*/_jsx(\"h6\",{className:\"fw-bold mb-3 text-muted\",children:\"Live Preview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-3 overflow-hidden border mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-light d-flex align-items-center justify-content-center\",style:{height:'150px'},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-image text-muted fs-1 opacity-25\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"badge mb-2 \".concat(tourType==='B2B'?'bg-warning text-dark':'bg-primary text-white'),children:[tourType,\" Package\"]}),/*#__PURE__*/_jsx(\"h6\",{className:\"fw-bold mb-1\",children:formData.title||'Untitled Tour'}),/*#__PURE__*/_jsxs(\"p\",{className:\"x-small text-muted mb-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-route me-1\"}),\" \",formData.fromCity,\" \\u2192 \",formData.toCity||'...']}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold text-primary\",children:[\"$\",formData.priceAdult]}),packageType==='Partial'&&/*#__PURE__*/_jsx(\"span\",{className:\"x-small badge bg-light text-dark border\",children:\"Partial Ready\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light p-3 rounded-3 x-small\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"fw-bold mb-2\",children:\"Configuration Summary:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"mb-0 ps-3\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Type: \",tourType]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Logistics: \",packageType,\" Package\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Vendors: \",((_formData$flightVendo=formData.flightVendors)===null||_formData$flightVendo===void 0?void 0:_formData$flightVendo.length)||0,\" selected\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Places: \",formData.capacity]})]})]})]})})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n                .animate-fadeIn {\\n                    animation: fadeIn 0.4s ease-out;\\n                }\\n                @keyframes fadeIn {\\n                    from { opacity: 0; transform: translateY(10px); }\\n                    to { opacity: 1; transform: translateY(0); }\\n                }\\n                .transition {\\n                    transition: all 0.3s ease;\\n                }\\n                .cursor-pointer {\\n                    cursor: pointer;\\n                }\\n                .hover-bg-light:hover {\\n                    background-color: #f0f7f5 !important;\\n                }\\n                .border-dashed {\\n                    border: 2px dashed #dee2e6 !important;\\n                }\\n                .bg-primary-subtle {\\n                    background-color: #e3f2fd !important;\\n                }\\n                .x-small {\\n                    font-size: 0.75rem;\\n                }\\n            \"})]});};export default CreateTour;","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","useParams","toursAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CreateTour","_formData$flightVendo","navigate","step","setStep","tourType","setTourType","packageType","setPackageType","id","isEdit","loading","setLoading","error","setError","success","setSuccess","fetching","setFetching","includedRef","notIncludedRef","fileInputRef","formData","setFormData","title","fromCity","toCity","duration","startDate","Date","toISOString","split","isVisaRequired","visaInfo","description","flightVendors","included","notIncluded","itinerary","day","hotels","capacity","priceAdult","priceChild","agencyCommission","images","fetchTourDetails","tour","getById","err","flightVendorsList","handleNext","prev","handlePrev","toggleVendor","vendor","includes","filter","v","addListItem","field","value","trim","removeListItem","index","_","i","handlePublish","tourData","Number","status","update","create","setTimeout","message","concat","addItineraryDay","length","removeItineraryDay","newItinerary","map","item","handleItineraryChange","handleFileUpload","e","files","Array","from","target","uploadData","FormData","forEach","file","append","token","localStorage","getItem","response","fetch","method","headers","body","data","json","ok","urls","removeImage","className","children","onClick","style","zIndex","num","width","height","type","placeholder","onChange","checked","htmlFor","rows","ref","onKeyDown","key","preventDefault","_includedRef$current","current","_notIncludedRef$curre","_fileInputRef$current","click","multiple","accept","url","src","startsWith","alt","objectFit","stopPropagation","disabled","top"],"sources":["/home/user/Desktop/code/demofront/frontend/src/pages/Admin/CreateTour.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { toursAPI } from '../../services/api';\n\nconst CreateTour = () => {\n    const navigate = useNavigate();\n    const [step, setStep] = useState(1);\n    const [tourType, setTourType] = useState('B2C'); // B2C or B2B\n    const [packageType, setPackageType] = useState('Full'); // Full or Partial\n    const { id } = useParams();\n    const isEdit = !!id;\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState(false);\n    const [fetching, setFetching] = useState(isEdit);\n\n    const includedRef = useRef(null);\n    const notIncludedRef = useRef(null);\n    const fileInputRef = useRef(null);\n\n    const [formData, setFormData] = useState({\n        title: '',\n        fromCity: 'Tashkent',\n        toCity: '',\n        duration: '7 days',\n        startDate: new Date().toISOString().split('T')[0],\n        isVisaRequired: false,\n        visaInfo: '',\n        description: '',\n        flightVendors: [],\n        included: [],\n        notIncluded: [],\n        itinerary: [{ day: 1, title: '', description: '' }],\n        hotels: [],\n        capacity: 20,\n        priceAdult: 0,\n        priceChild: 0,\n        agencyCommission: 0,\n        images: []\n    });\n\n    useEffect(() => {\n        if (isEdit) {\n            fetchTourDetails();\n        }\n    }, [id]);\n\n    const fetchTourDetails = async () => {\n        setFetching(true);\n        try {\n            const tour = await toursAPI.getById(id);\n            setFormData({\n                ...tour,\n                startDate: tour.startDate ? new Date(tour.startDate).toISOString().split('T')[0] : new Date().toISOString().split('T')[0],\n                flightVendors: tour.flightVendors || [],\n                included: tour.included || [],\n                notIncluded: tour.notIncluded || [],\n                itinerary: tour.itinerary || [{ day: 1, title: '', description: '' }],\n                hotels: tour.hotels || [],\n                images: tour.images || []\n            });\n            setTourType(tour.tourType || 'B2C');\n            setPackageType(tour.packageType || 'Full');\n        } catch (err) {\n            setError('Failed to fetch tour details');\n        } finally {\n            setFetching(false);\n        }\n    };\n\n    const flightVendorsList = ['Uzbekistan Airways', 'Turkish Airlines', 'Fly Dubai', 'Air Arabia', 'Qatar Airways'];\n\n    const handleNext = () => setStep(prev => prev + 1);\n    const handlePrev = () => setStep(prev => prev - 1);\n\n    const toggleVendor = (vendor) => {\n        setFormData(prev => ({\n            ...prev,\n            flightVendors: prev.flightVendors.includes(vendor)\n                ? prev.flightVendors.filter(v => v !== vendor)\n                : [...prev.flightVendors, vendor]\n        }));\n    };\n\n    const addListItem = (field, value) => {\n        if (!value.trim()) return;\n        setFormData(prev => ({\n            ...prev,\n            [field]: [...prev[field], value.trim()]\n        }));\n    };\n\n    const removeListItem = (field, index) => {\n        setFormData(prev => ({\n            ...prev,\n            [field]: prev[field].filter((_, i) => i !== index)\n        }));\n    };\n\n    const handlePublish = async () => {\n        setLoading(true);\n        setError('');\n        try {\n            const tourData = {\n                ...formData,\n                tourType,\n                packageType,\n                priceAdult: Number(formData.priceAdult),\n                priceChild: Number(formData.priceChild),\n                capacity: Number(formData.capacity),\n                agencyCommission: Number(formData.agencyCommission),\n                status: 'Active'\n            };\n            if (isEdit) {\n                await toursAPI.update(id, tourData);\n            } else {\n                await toursAPI.create(tourData);\n            }\n            setSuccess(true);\n            setTimeout(() => navigate('/admin/tours'), 2000);\n        } catch (err) {\n            setError(err.message || `Failed to ${isEdit ? 'update' : 'create'} tour`);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const addItineraryDay = () => {\n        setFormData(prev => ({\n            ...prev,\n            itinerary: [\n                ...prev.itinerary,\n                { day: prev.itinerary.length + 1, title: '', description: '' }\n            ]\n        }));\n    };\n\n    const removeItineraryDay = (index) => {\n        const newItinerary = formData.itinerary.filter((_, i) => i !== index)\n            .map((item, i) => ({ ...item, day: i + 1 })); // Re-index days\n        setFormData(prev => ({ ...prev, itinerary: newItinerary }));\n    };\n\n    const handleItineraryChange = (index, field, value) => {\n        const newItinerary = [...formData.itinerary];\n        newItinerary[index] = { ...newItinerary[index], [field]: value };\n        setFormData(prev => ({ ...prev, itinerary: newItinerary }));\n    };\n\n    const handleFileUpload = async (e) => {\n        const files = Array.from(e.target.files);\n        if (files.length === 0) return;\n\n        const uploadData = new FormData();\n        files.forEach(file => uploadData.append('images', file));\n\n        setLoading(true);\n        try {\n            const token = localStorage.getItem('token');\n            const response = await fetch('http://localhost:5000/api/upload/multiple', {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${token}`\n                },\n                body: uploadData\n            });\n            const data = await response.json();\n            if (response.ok) {\n                setFormData(prev => ({\n                    ...prev,\n                    images: [...prev.images, ...data.urls]\n                }));\n            } else {\n                setError(data.message || 'Upload failed');\n            }\n        } catch (err) {\n            setError('Failed to upload images');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const removeImage = (index) => {\n        setFormData(prev => ({\n            ...prev,\n            images: prev.images.filter((_, i) => i !== index)\n        }));\n    };\n\n    return (\n        <div className=\"container-fluid\">\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                <div>\n                    <h3 className=\"fw-bold m-0\">{isEdit ? 'Edit Tour' : 'Create New Tour'}</h3>\n                    <p className=\"text-muted small\">{isEdit ? 'Modify existing travel package' : 'Design and publish a new travel package'}</p>\n                </div>\n                <div className=\"d-flex gap-2\">\n                    <div className=\"btn-group shadow-sm\">\n                        <button className={`btn btn-sm ${tourType === 'B2C' ? 'btn-primary' : 'btn-outline-primary'}`} onClick={() => setTourType('B2C')}>Public (B2C)</button>\n                        <button className={`btn btn-sm ${tourType === 'B2B' ? 'btn-primary' : 'btn-outline-primary'}`} onClick={() => setTourType('B2B')}>Agency (B2B)</button>\n                    </div>\n                </div>\n            </div>\n\n            {error && (\n                <div className=\"alert alert-danger mb-4\">\n                    <i className=\"fa fa-exclamation-circle me-2\"></i>{error}\n                </div>\n            )}\n            {success && (\n                <div className=\"alert alert-success mb-4\">\n                    <i className=\"fa fa-check-circle me-2\"></i>Tour {isEdit ? 'updated' : 'created'} successfully! Redirecting...\n                </div>\n            )}\n\n            {fetching ? (\n                <div className=\"text-center py-5\">\n                    <div className=\"spinner-border text-primary mb-3\"></div>\n                    <p className=\"text-muted\">Loading tour details...</p>\n                </div>\n            ) : (\n                <div className=\"row\">\n                    <div className=\"col-lg-8\">\n                        <div className=\"card border-0 shadow-sm p-4 rounded-4 bg-white\">\n                            {/* Stepper Header */}\n                            <div className=\"d-flex justify-content-between mb-5 px-5 position-relative\">\n                                <div className=\"position-absolute top-50 start-0 end-0 border-top translate-middle-y\" style={{ zIndex: 0 }}></div>\n                                {[1, 2, 3, 4, 5].map(num => (\n                                    <div key={num} className=\"position-relative\" style={{ zIndex: 1 }}>\n                                        <div className={`rounded-circle d-flex align-items-center justify-content-center fw-bold transition ${step >= num ? 'bg-primary text-white shadow' : 'bg-light text-muted border'}`}\n                                            style={{ width: '40px', height: '40px' }}>\n                                            {num}\n                                        </div>\n                                        <span className=\"position-absolute start-50 translate-middle-x mt-2 x-small fw-bold text-nowrap\">\n                                            {num === 1 ? 'Basic' : num === 2 ? 'Logistics' : num === 3 ? 'Itinerary' : num === 4 ? 'Pricing' : 'Media'}\n                                        </span>\n                                    </div>\n                                ))}\n                            </div>\n\n                            {/* Step Content */}\n                            <div className=\"mt-4\">\n                                {step === 1 && (\n                                    <div className=\"animate-fadeIn\">\n                                        <h5 className=\"fw-bold mb-4\">Step 1: Basic & Routing</h5>\n                                        <div className=\"row g-3\">\n                                            <div className=\"col-12\">\n                                                <label className=\"form-label small fw-bold text-muted\">TOUR TITLE</label>\n                                                <input type=\"text\" className=\"form-control bg-light border-0 py-2\" placeholder=\"e.g. Istanbul Magic & Shopping\" value={formData.title} onChange={e => setFormData({ ...formData, title: e.target.value })} />\n                                            </div>\n                                            <div className=\"col-md-6\">\n                                                <label className=\"form-label small fw-bold text-muted\">FROM (ORIGIN)</label>\n                                                <input type=\"text\" className=\"form-control bg-light border-0 py-2\" value={formData.fromCity} onChange={e => setFormData({ ...formData, fromCity: e.target.value })} />\n                                            </div>\n                                            <div className=\"col-md-6\">\n                                                <label className=\"form-label small fw-bold text-muted\">TO (DESTINATION)</label>\n                                                <input type=\"text\" className=\"form-control bg-light border-0 py-2\" placeholder=\"e.g. Antalya\" value={formData.toCity} onChange={e => setFormData({ ...formData, toCity: e.target.value })} />\n                                            </div>\n                                            <div className=\"col-md-6\">\n                                                <label className=\"form-label small fw-bold text-muted\">DURATION</label>\n                                                <input type=\"text\" className=\"form-control bg-light border-0 py-2\" placeholder=\"e.g. 7 days / 6 nights\" value={formData.duration} onChange={e => setFormData({ ...formData, duration: e.target.value })} />\n                                            </div>\n                                            <div className=\"col-md-6\">\n                                                <label className=\"form-label small fw-bold text-muted\">START DATE</label>\n                                                <input type=\"date\" className=\"form-control bg-light border-0 py-2\" value={formData.startDate} onChange={e => setFormData({ ...formData, startDate: e.target.value })} />\n                                            </div>\n                                            <div className=\"col-md-12\">\n                                                <div className=\"form-check form-switch p-3 bg-light rounded-3 border\">\n                                                    <input className=\"form-check-input ms-0 me-2\" type=\"checkbox\" id=\"visaSwitch\" checked={formData.isVisaRequired} onChange={e => setFormData({ ...formData, isVisaRequired: e.target.checked })} />\n                                                    <label className=\"form-check-label fw-bold text-muted small\" htmlFor=\"visaSwitch\">VISA IS REQUIRED FOR THIS TOUR</label>\n                                                </div>\n                                            </div>\n                                            {formData.isVisaRequired && (\n                                                <div className=\"col-md-12 animate-fadeIn\">\n                                                    <label className=\"form-label small fw-bold text-muted\">VISA ADDITIONAL INFO</label>\n                                                    <input type=\"text\" className=\"form-control bg-light border-0 py-2\" placeholder=\"e.g. Visa fee $50, process takes 5 days\" value={formData.visaInfo} onChange={e => setFormData({ ...formData, visaInfo: e.target.value })} />\n                                                </div>\n                                            )}\n                                            <div className=\"col-12\">\n                                                <label className=\"form-label small fw-bold text-muted\">DESCRIPTION</label>\n                                                <textarea className=\"form-control bg-light border-0 py-2\" rows=\"4\" placeholder=\"Describe the tour highlights...\" value={formData.description} onChange={e => setFormData({ ...formData, description: e.target.value })}></textarea>\n                                            </div>\n                                        </div>\n                                    </div>\n                                )}\n\n                                {step === 2 && (\n                                    <div className=\"animate-fadeIn\">\n                                        <h5 className=\"fw-bold mb-4\">Step 2: Logistics & Details</h5>\n                                        <div className=\"row g-3\">\n                                            <div className=\"col-md-12 mb-3\">\n                                                <label className=\"form-label small fw-bold text-muted d-block\">PACKAGE TYPE</label>\n                                                <div className=\"d-flex gap-3\">\n                                                    <div className={`p-3 border rounded-3 flex-grow-1 cursor-pointer transition ${packageType === 'Full' ? 'border-primary bg-primary-subtle' : 'bg-light'}`} onClick={() => setPackageType('Full')}>\n                                                        <h6 className=\"fw-bold mb-1\">Full Package</h6>\n                                                        <p className=\"x-small text-muted mb-0\">Fixed flight + hotel bundle</p>\n                                                    </div>\n                                                    <div className={`p-3 border rounded-3 flex-grow-1 cursor-pointer transition ${packageType === 'Partial' ? 'border-primary bg-primary-subtle' : 'bg-light'}`} onClick={() => setPackageType('Partial')}>\n                                                        <h6 className=\"fw-bold mb-1\">Custom/Partial</h6>\n                                                        <p className=\"x-small text-muted mb-0\">Select multiple options</p>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            {/* Show Flight Vendors ONLY for B2B */}\n                                            {tourType === 'B2B' && (\n                                                <div className=\"col-12\">\n                                                    <label className=\"form-label small fw-bold text-muted\">AVAILABLE FLIGHT VENDORS</label>\n                                                    <div className=\"d-flex flex-wrap gap-2\">\n                                                        {flightVendorsList.map(vendor => (\n                                                            <div key={vendor}\n                                                                className={`badge rounded-pill px-3 py-2 cursor-pointer border transition ${formData.flightVendors.includes(vendor) ? 'bg-primary border-primary' : 'bg-light text-dark border-secondary-subtle'}`}\n                                                                onClick={() => toggleVendor(vendor)}>\n                                                                {vendor}\n                                                            </div>\n                                                        ))}\n                                                    </div>\n                                                </div>\n                                            )}\n\n                                            <div className=\"col-md-6\">\n                                                <label className=\"form-label small fw-bold text-muted\">PRICE INCLUDES</label>\n                                                <div className=\"input-group mb-2\">\n                                                    <input\n                                                        ref={includedRef}\n                                                        type=\"text\"\n                                                        className=\"form-control bg-light border-0\"\n                                                        placeholder=\"e.g. Breakfast, Transfer\"\n                                                        onKeyDown={(e) => {\n                                                            if (e.key === 'Enter') {\n                                                                e.preventDefault();\n                                                                addListItem('included', e.target.value);\n                                                                e.target.value = '';\n                                                            }\n                                                        }}\n                                                    />\n                                                    <button className=\"btn btn-outline-primary\" type=\"button\" onClick={() => {\n                                                        const value = includedRef.current?.value;\n                                                        addListItem('included', value);\n                                                        if (includedRef.current) includedRef.current.value = '';\n                                                    }}><i className=\"fa fa-plus\"></i></button>\n                                                </div>\n                                                <div className=\"d-flex flex-wrap gap-2\">\n                                                    {formData.included.map((item, i) => (\n                                                        <span key={i} className=\"badge bg-success-subtle text-success border border-success-subtle d-flex align-items-center gap-2\">\n                                                            {item}\n                                                            <i className=\"fa fa-times cursor-pointer\" onClick={() => removeListItem('included', i)}></i>\n                                                        </span>\n                                                    ))}\n                                                </div>\n                                            </div>\n\n                                            <div className=\"col-md-6\">\n                                                <label className=\"form-label small fw-bold text-muted\">PRICE EXCLUDES (EXTRA)</label>\n                                                <div className=\"input-group mb-2\">\n                                                    <input\n                                                        ref={notIncludedRef}\n                                                        type=\"text\"\n                                                        className=\"form-control bg-light border-0\"\n                                                        placeholder=\"e.g. Visa, Personal expenses\"\n                                                        onKeyDown={(e) => {\n                                                            if (e.key === 'Enter') {\n                                                                e.preventDefault();\n                                                                addListItem('notIncluded', e.target.value);\n                                                                e.target.value = '';\n                                                            }\n                                                        }}\n                                                    />\n                                                    <button className=\"btn btn-outline-danger\" type=\"button\" onClick={() => {\n                                                        const value = notIncludedRef.current?.value;\n                                                        addListItem('notIncluded', value);\n                                                        if (notIncludedRef.current) notIncludedRef.current.value = '';\n                                                    }}><i className=\"fa fa-plus\"></i></button>\n                                                </div>\n                                                <div className=\"d-flex flex-wrap gap-2\">\n                                                    {formData.notIncluded.map((item, i) => (\n                                                        <span key={i} className=\"badge bg-danger-subtle text-danger border border-danger-subtle d-flex align-items-center gap-2\">\n                                                            {item}\n                                                            <i className=\"fa fa-times cursor-pointer\" onClick={() => removeListItem('notIncluded', i)}></i>\n                                                        </span>\n                                                    ))}\n                                                </div>\n                                            </div>\n\n                                            <div className=\"col-md-12\">\n                                                <label className=\"form-label small fw-bold text-muted\">TOTAL PLACES (CAPACITY)</label>\n                                                <input type=\"number\" className=\"form-control bg-light border-0 py-2\" value={formData.capacity} onChange={e => setFormData({ ...formData, capacity: e.target.value })} />\n                                            </div>\n                                        </div>\n                                    </div>\n                                )}\n\n                                {step === 3 && (\n                                    <div className=\"animate-fadeIn\">\n                                        <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                                            <h5 className=\"fw-bold m-0\">Step 3: Tour Itinerary</h5>\n                                            <button className=\"btn btn-sm btn-outline-primary rounded-pill px-3\" onClick={addItineraryDay}>\n                                                <i className=\"fa fa-plus me-2\"></i>Add Day\n                                            </button>\n                                        </div>\n\n                                        <div className=\"accordion\" id=\"itineraryAccordion\">\n                                            {formData.itinerary.map((day, index) => (\n                                                <div className=\"card border mb-3 shadow-sm overflow-hidden\" key={index}>\n                                                    <div className=\"card-header bg-white border-bottom-0 p-3 d-flex align-items-center justify-content-between\">\n                                                        <div className=\"d-flex align-items-center flex-grow-1\">\n                                                            <div className=\"bg-primary-subtle text-primary rounded-circle d-flex align-items-center justify-content-center fw-bold me-3\" style={{ width: '32px', height: '32px' }}>\n                                                                {day.day}\n                                                            </div>\n                                                            <input\n                                                                type=\"text\"\n                                                                className=\"form-control form-control-sm border-0 fw-bold bg-transparent shadow-none\"\n                                                                placeholder={`Day ${day.day} Title (e.g. Arrival)`}\n                                                                value={day.title}\n                                                                onChange={(e) => handleItineraryChange(index, 'title', e.target.value)}\n                                                            />\n                                                        </div>\n                                                        {formData.itinerary.length > 1 && (\n                                                            <button className=\"btn btn-link text-danger p-0 ms-2\" onClick={() => removeItineraryDay(index)}>\n                                                                <i className=\"fa fa-trash\"></i>\n                                                            </button>\n                                                        )}\n                                                    </div>\n                                                    <div className=\"card-body p-0 border-top\">\n                                                        <textarea\n                                                            className=\"form-control border-0 p-3 bg-light\"\n                                                            rows=\"3\"\n                                                            placeholder=\"Detailed description of activities...\"\n                                                            value={day.description}\n                                                            onChange={(e) => handleItineraryChange(index, 'description', e.target.value)}\n                                                        ></textarea>\n                                                    </div>\n                                                </div>\n                                            ))}\n                                        </div>\n                                    </div>\n                                )}\n\n                                {step === 4 && (\n                                    <div className=\"animate-fadeIn\">\n                                        <h5 className=\"fw-bold mb-4\">Step 4: Pricing Strategy</h5>\n                                        <div className=\"row g-3\">\n                                            <div className=\"col-md-6\">\n                                                <label className=\"form-label small fw-bold text-muted\">ADULT PRICE ($)</label>\n                                                <input type=\"number\" className=\"form-control bg-light border-0 py-2\" value={formData.priceAdult} onChange={e => setFormData({ ...formData, priceAdult: e.target.value })} />\n                                            </div>\n                                            <div className=\"col-md-6\">\n                                                <label className=\"form-label small fw-bold text-muted\">CHILD PRICE ($)</label>\n                                                <input type=\"number\" className=\"form-control bg-light border-0 py-2\" value={formData.priceChild} onChange={e => setFormData({ ...formData, priceChild: e.target.value })} />\n                                            </div>\n                                            {tourType === 'B2B' && (\n                                                <div className=\"col-md-12\">\n                                                    <label className=\"form-label small fw-bold text-muted\">AGENCY COMMISSION ($)</label>\n                                                    <input type=\"number\" className=\"form-control bg-primary-subtle border-primary-subtle py-2 fw-bold\" value={formData.agencyCommission} onChange={e => setFormData({ ...formData, agencyCommission: e.target.value })} />\n                                                    <p className=\"x-small text-muted mt-1\">This amount will be deducted for B2B partners.</p>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n\n                                {step === 5 && (\n                                    <div className=\"animate-fadeIn\">\n                                        <h5 className=\"fw-bold mb-4\">Step 5: Media Gallery</h5>\n\n                                        <div\n                                            className=\"border-2 border-dashed rounded-4 p-5 text-center bg-light cursor-pointer hover-bg-light transition mb-4\"\n                                            onClick={() => fileInputRef.current?.click()}\n                                        >\n                                            <input\n                                                type=\"file\"\n                                                ref={fileInputRef}\n                                                className=\"d-none\"\n                                                multiple\n                                                accept=\"image/*\"\n                                                onChange={handleFileUpload}\n                                            />\n                                            <i className=\"fa fa-cloud-upload-alt fs-1 text-primary mb-3\"></i>\n                                            <h6 className=\"fw-bold\">Upload Tour Photos</h6>\n                                            <p className=\"small text-muted\">Upload high-quality images of the destination</p>\n                                        </div>\n\n                                        {formData.images.length > 0 && (\n                                            <div className=\"row g-3\">\n                                                {formData.images.map((url, index) => (\n                                                    <div key={index} className=\"col-md-4 col-sm-6\">\n                                                        <div className=\"position-relative rounded-3 overflow-hidden border shadow-sm group\">\n                                                            <img src={url.startsWith('http') ? url : `http://localhost:5000${url}`} alt=\"Tour\" className=\"img-fluid w-100\" style={{ height: '150px', objectFit: 'cover' }} />\n                                                            <div className=\"position-absolute top-0 end-0 p-2\">\n                                                                <button\n                                                                    className=\"btn btn-danger btn-sm rounded-circle\"\n                                                                    onClick={(e) => { e.stopPropagation(); removeImage(index); }}\n                                                                >\n                                                                    <i className=\"fa fa-times\"></i>\n                                                                </button>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        )}\n                                    </div>\n                                )}\n                            </div>\n\n                            {/* Navigation Buttons */}\n                            <div className=\"d-flex justify-content-between mt-5 pt-4 border-top\">\n                                <button className=\"btn btn-light rounded-pill px-4\" disabled={step === 1} onClick={handlePrev}>Back</button>\n                                {step < 5 ? (\n                                    <button className=\"btn btn-primary rounded-pill px-5 shadow\" onClick={handleNext}>Next Step</button>\n                                ) : (\n                                    <button\n                                        className=\"btn btn-success rounded-pill px-5 shadow\"\n                                        onClick={handlePublish}\n                                        disabled={loading}\n                                    >\n                                        {loading ? (\n                                            <><span className=\"spinner-border spinner-border-sm me-2\"></span>{isEdit ? 'Saving...' : 'Publishing...'}</>\n                                        ) : (\n                                            <>{isEdit ? 'Save Changes' : 'Publish Tour'}</>\n                                        )}\n                                    </button>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Live Preview Sidebar */}\n                    <div className=\"col-lg-4\">\n                        <div className=\"card border-0 shadow-sm p-4 rounded-4 bg-white sticky-top\" style={{ top: '100px' }}>\n                            <h6 className=\"fw-bold mb-3 text-muted\">Live Preview</h6>\n                            <div className=\"rounded-3 overflow-hidden border mb-3\">\n                                <div className=\"bg-light d-flex align-items-center justify-content-center\" style={{ height: '150px' }}>\n                                    <i className=\"fa fa-image text-muted fs-1 opacity-25\"></i>\n                                </div>\n                                <div className=\"p-3\">\n                                    <span className={`badge mb-2 ${tourType === 'B2B' ? 'bg-warning text-dark' : 'bg-primary text-white'}`}>{tourType} Package</span>\n                                    <h6 className=\"fw-bold mb-1\">{formData.title || 'Untitled Tour'}</h6>\n                                    <p className=\"x-small text-muted mb-2\">\n                                        <i className=\"fa fa-route me-1\"></i> {formData.fromCity}  {formData.toCity || '...'}\n                                    </p>\n                                    <div className=\"d-flex justify-content-between align-items-center\">\n                                        <span className=\"fw-bold text-primary\">${formData.priceAdult}</span>\n                                        {packageType === 'Partial' && <span className=\"x-small badge bg-light text-dark border\">Partial Ready</span>}\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"bg-light p-3 rounded-3 x-small\">\n                                <p className=\"fw-bold mb-2\">Configuration Summary:</p>\n                                <ul className=\"mb-0 ps-3\">\n                                    <li>Type: {tourType}</li>\n                                    <li>Logistics: {packageType} Package</li>\n                                    <li>Vendors: {formData.flightVendors?.length || 0} selected</li>\n                                    <li>Places: {formData.capacity}</li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            <style>{`\n                .animate-fadeIn {\n                    animation: fadeIn 0.4s ease-out;\n                }\n                @keyframes fadeIn {\n                    from { opacity: 0; transform: translateY(10px); }\n                    to { opacity: 1; transform: translateY(0); }\n                }\n                .transition {\n                    transition: all 0.3s ease;\n                }\n                .cursor-pointer {\n                    cursor: pointer;\n                }\n                .hover-bg-light:hover {\n                    background-color: #f0f7f5 !important;\n                }\n                .border-dashed {\n                    border: 2px dashed #dee2e6 !important;\n                }\n                .bg-primary-subtle {\n                    background-color: #e3f2fd !important;\n                }\n                .x-small {\n                    font-size: 0.75rem;\n                }\n            `}</style>\n        </div>\n    );\n};\n\nexport default CreateTour;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}