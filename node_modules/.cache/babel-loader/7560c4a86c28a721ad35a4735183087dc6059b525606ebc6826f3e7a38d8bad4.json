{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import{toursAPI}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AgentTourView=()=>{var _tour$flightVariants,_tour$flightVariants2,_tour$images,_tour$hotelRoomTypes,_tour$baseServices,_priceBreakdown$outbo,_priceBreakdown$outbo2,_priceBreakdown$retur,_priceBreakdown$retur2,_priceBreakdown$hotel,_priceBreakdown$hotel2,_priceBreakdown$hotel3,_priceBreakdown$baseS,_priceBreakdown$agent,_priceBreakdown$agent2,_priceBreakdown$agent3;const{id}=useParams();const navigate=useNavigate();const[tour,setTour]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');// Selection state\nconst[selectedOutbound,setSelectedOutbound]=useState(null);const[selectedReturn,setSelectedReturn]=useState(null);const[selectedRoomType,setSelectedRoomType]=useState(null);const[nights,setNights]=useState(7);// Price breakdown state\nconst[priceBreakdown,setPriceBreakdown]=useState(null);const[calculatingPrice,setCalculatingPrice]=useState(false);useEffect(()=>{fetchTour();},[id]);const fetchTour=async()=>{try{var _data$flightVariants,_data$hotelRoomTypes;setLoading(true);const data=await toursAPI.getById(id);setTour(data);// Auto-select first options\nif(((_data$flightVariants=data.flightVariants)===null||_data$flightVariants===void 0?void 0:_data$flightVariants.length)>0){const firstOutbound=data.flightVariants.find(f=>f.type==='outbound');const firstReturn=data.flightVariants.find(f=>f.type==='return');if(firstOutbound)setSelectedOutbound(firstOutbound._id);if(firstReturn)setSelectedReturn(firstReturn._id);}if(((_data$hotelRoomTypes=data.hotelRoomTypes)===null||_data$hotelRoomTypes===void 0?void 0:_data$hotelRoomTypes.length)>0){setSelectedRoomType(data.hotelRoomTypes[0]._id);}if(data.nightsFrom){setNights(data.nightsFrom);}}catch(err){setError(err.message||'Failed to load tour');}finally{setLoading(false);}};// Calculate price whenever selections change\nuseEffect(()=>{if(tour&&selectedOutbound&&selectedReturn&&selectedRoomType&&nights>0){calculatePrice();}},[selectedOutbound,selectedReturn,selectedRoomType,nights,tour]);const calculatePrice=async()=>{if(!tour||!selectedOutbound||!selectedReturn||!selectedRoomType||!nights){return;}setCalculatingPrice(true);try{const token=localStorage.getItem('token');const response=await fetch('http://localhost:5000/api/tours/calculate-price',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({tourId:tour._id,outboundFlightId:selectedOutbound,returnFlightId:selectedReturn,roomTypeId:selectedRoomType,nights:parseInt(nights)})});if(!response.ok){throw new Error('Failed to calculate price');}const data=await response.json();setPriceBreakdown(data.breakdown);}catch(err){console.error('Price calculation error:',err);setError('Failed to calculate price');}finally{setCalculatingPrice(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-vh-100 d-flex align-items-center justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary mb-3\",style:{width:'3rem',height:'3rem'}}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Loading tour details...\"})]})});}if(error||!tour){return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-exclamation-circle me-2\"}),error||'Tour not found']}),/*#__PURE__*/_jsxs(Link,{to:\"/agent/tours\",className:\"btn btn-outline-secondary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-arrow-left me-2\"}),\"Back to Tours\"]})]});}const outboundFlights=((_tour$flightVariants=tour.flightVariants)===null||_tour$flightVariants===void 0?void 0:_tour$flightVariants.filter(f=>f.type==='outbound'))||[];const returnFlights=((_tour$flightVariants2=tour.flightVariants)===null||_tour$flightVariants2===void 0?void 0:_tour$flightVariants2.filter(f=>f.type==='return'))||[];return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"fw-bold m-0\",children:tour.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted small mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-route me-2\"}),tour.fromCity,\" \\u2192 \",tour.toCity]})]}),/*#__PURE__*/_jsxs(Link,{to:\"/agent/tours\",className:\"btn btn-outline-secondary btn-sm rounded-pill px-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-arrow-left me-2\"}),\"Back to Tours\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm rounded-4 p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"fw-bold mb-3\",children:\"Tour Information\"}),((_tour$images=tour.images)===null||_tour$images===void 0?void 0:_tour$images[0])&&/*#__PURE__*/_jsx(\"img\",{src:tour.images[0].startsWith('http')?tour.images[0]:\"http://localhost:5000\".concat(tour.images[0]),alt:tour.title,className:\"img-fluid rounded-3 mb-3\",style:{maxHeight:'300px',width:'100%',objectFit:'cover'}}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:tour.description||'No description available'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3 mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-light rounded-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Nights Range\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[tour.nightsFrom,\"-\",tour.nightsTill,\" nights\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-light rounded-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[tour.category,\"\\u2605 Hotel\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-light rounded-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Meal Type\"}),/*#__PURE__*/_jsx(\"strong\",{children:tour.mealType||'N/A'})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm rounded-4 p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"fw-bold mb-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plane text-primary me-2\"}),\"Select Flights\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-bold small text-uppercase text-muted\",children:\"Outbound Flight\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-2\",children:outboundFlights.map(flight=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-3 p-3 cursor-pointer transition \".concat(selectedOutbound===flight._id?'border-primary border-2 bg-primary bg-opacity-10':'border-secondary-subtle'),onClick:()=>setSelectedOutbound(flight._id),style:{cursor:'pointer'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold\",children:flight.airline}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:flight.flightNumber}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:flight.departureTime&&flight.arrivalTime&&\"\".concat(flight.departureTime,\" - \").concat(flight.arrivalTime)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-primary fs-5\",children:[\"$\",flight.price]}),selectedOutbound===flight._id&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-primary mt-1\",children:\"Selected\"})]})]})})},flight._id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-bold small text-uppercase text-muted\",children:\"Return Flight\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-2\",children:returnFlights.map(flight=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-3 p-3 cursor-pointer transition \".concat(selectedReturn===flight._id?'border-success border-2 bg-success bg-opacity-10':'border-secondary-subtle'),onClick:()=>setSelectedReturn(flight._id),style:{cursor:'pointer'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold\",children:flight.airline}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:flight.flightNumber}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:flight.departureTime&&flight.arrivalTime&&\"\".concat(flight.departureTime,\" - \").concat(flight.arrivalTime)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-success fs-5\",children:[\"$\",flight.price]}),selectedReturn===flight._id&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-success mt-1\",children:\"Selected\"})]})]})})},flight._id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm rounded-4 p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"fw-bold mb-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-bed text-primary me-2\"}),\"Select Room Type\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-3 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-bold small\",children:\"Number of Nights\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control form-control-lg\",min:tour.nightsFrom,max:tour.nightsTill,value:nights,onChange:e=>setNights(parseInt(e.target.value)||tour.nightsFrom)}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Range: \",tour.nightsFrom,\"-\",tour.nightsTill,\" nights\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-2\",children:(_tour$hotelRoomTypes=tour.hotelRoomTypes)===null||_tour$hotelRoomTypes===void 0?void 0:_tour$hotelRoomTypes.map(room=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-3 p-3 cursor-pointer transition \".concat(selectedRoomType===room._id?'border-warning border-2 bg-warning bg-opacity-10':'border-secondary-subtle'),onClick:()=>setSelectedRoomType(room._id),style:{cursor:'pointer'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold\",children:room.typeName}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:room.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-warning fs-6\",children:[\"$\",room.pricePerNight,\"/night\"]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block\",children:[\"\\xD7 \",nights,\" nights\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-dark\",children:[\"$\",room.pricePerNight*nights]}),selectedRoomType===room._id&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-warning text-dark mt-1\",children:\"Selected\"})]})]})})},room._id))})]}),((_tour$baseServices=tour.baseServices)===null||_tour$baseServices===void 0?void 0:_tour$baseServices.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm rounded-4 p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"fw-bold mb-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-concierge-bell text-primary me-2\"}),\"Included Services\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted small mb-3\",children:\"These services are always included in the tour price.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-2\",children:tour.baseServices.map((service,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"border border-success-subtle bg-success-subtle rounded-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold\",children:service.serviceName}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:service.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-success\",children:[\"$\",service.fixedCost]})]})})},index))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow rounded-4 p-4 sticky-top\",style:{top:'100px'},children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"fw-bold mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-calculator text-primary me-2\"}),\"Price Breakdown\"]}),calculatingPrice?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted small\",children:\"Calculating price...\"})]}):priceBreakdown?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 pb-3 border-bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-muted small\",children:\"Outbound Flight\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold\",children:[\"$\",((_priceBreakdown$outbo=priceBreakdown.outboundFlight)===null||_priceBreakdown$outbo===void 0?void 0:_priceBreakdown$outbo.price)||0]})]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:(_priceBreakdown$outbo2=priceBreakdown.outboundFlight)===null||_priceBreakdown$outbo2===void 0?void 0:_priceBreakdown$outbo2.airline})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 pb-3 border-bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-muted small\",children:\"Return Flight\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold\",children:[\"$\",((_priceBreakdown$retur=priceBreakdown.returnFlight)===null||_priceBreakdown$retur===void 0?void 0:_priceBreakdown$retur.price)||0]})]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:(_priceBreakdown$retur2=priceBreakdown.returnFlight)===null||_priceBreakdown$retur2===void 0?void 0:_priceBreakdown$retur2.airline})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 pb-3 border-bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted small\",children:[\"Hotel (\",nights,\" nights)\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold\",children:[\"$\",((_priceBreakdown$hotel=priceBreakdown.hotel)===null||_priceBreakdown$hotel===void 0?void 0:_priceBreakdown$hotel.total)||0]})]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block\",children:[(_priceBreakdown$hotel2=priceBreakdown.hotel)===null||_priceBreakdown$hotel2===void 0?void 0:_priceBreakdown$hotel2.typeName,\" - $\",(_priceBreakdown$hotel3=priceBreakdown.hotel)===null||_priceBreakdown$hotel3===void 0?void 0:_priceBreakdown$hotel3.pricePerNight,\"/night\"]})]}),((_priceBreakdown$baseS=priceBreakdown.baseServices)===null||_priceBreakdown$baseS===void 0?void 0:_priceBreakdown$baseS.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 pb-3 border-bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-muted small\",children:\"Base Services\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold\",children:[\"$\",priceBreakdown.baseServicesTotal||0]})]}),priceBreakdown.baseServices.map((service,idx)=>/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block\",children:[\"\\u2022 \",service.serviceName,\" ($\",service.fixedCost,\")\"]},idx))]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 pb-3 border-bottom\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold fs-5\",children:[\"$\",priceBreakdown.subtotal||0]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 pb-3 border-bottom\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-success small\",children:[\"Agent Markup (\",((_priceBreakdown$agent=priceBreakdown.agentMarkup)===null||_priceBreakdown$agent===void 0?void 0:_priceBreakdown$agent.type)==='PERCENT'?\"\".concat((_priceBreakdown$agent2=priceBreakdown.agentMarkup)===null||_priceBreakdown$agent2===void 0?void 0:_priceBreakdown$agent2.value,\"%\"):'Fixed',\")\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold text-success\",children:[\"+$\",((_priceBreakdown$agent3=priceBreakdown.agentMarkup)===null||_priceBreakdown$agent3===void 0?void 0:_priceBreakdown$agent3.amount)||0]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-primary bg-opacity-10 rounded-3 p-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold text-uppercase\",children:\"Final Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"fw-bold text-primary fs-3\",children:[\"$\",priceBreakdown.finalTotal||0]})]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mt-1\",children:\"Per person\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-100 py-3 rounded-pill shadow mb-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-ticket-alt me-2\"}),\"Book This Tour\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Need help? Contact support\"})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-info-circle text-muted fs-3 mb-2 opacity-25\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted small\",children:\"Select options to see price\"})]})]})})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n                .cursor-pointer { cursor: pointer; }\\n                .transition { transition: all 0.3s ease; }\\n                .text-primary { color: #30c39e !important; }\\n                .bg-primary { background-color: #30c39e !important; }\\n                .border-primary { border-color: #30c39e !important; }\\n                .btn-primary { background-color: #30c39e; border-color: #30c39e; }\\n                .btn-primary:hover { background-color: #28a686; border-color: #28a686; }\\n            \"})]});};export default AgentTourView;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","toursAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AgentTourView","_tour$flightVariants","_tour$flightVariants2","_tour$images","_tour$hotelRoomTypes","_tour$baseServices","_priceBreakdown$outbo","_priceBreakdown$outbo2","_priceBreakdown$retur","_priceBreakdown$retur2","_priceBreakdown$hotel","_priceBreakdown$hotel2","_priceBreakdown$hotel3","_priceBreakdown$baseS","_priceBreakdown$agent","_priceBreakdown$agent2","_priceBreakdown$agent3","id","navigate","tour","setTour","loading","setLoading","error","setError","selectedOutbound","setSelectedOutbound","selectedReturn","setSelectedReturn","selectedRoomType","setSelectedRoomType","nights","setNights","priceBreakdown","setPriceBreakdown","calculatingPrice","setCalculatingPrice","fetchTour","_data$flightVariants","_data$hotelRoomTypes","data","getById","flightVariants","length","firstOutbound","find","f","type","firstReturn","_id","hotelRoomTypes","nightsFrom","err","message","calculatePrice","token","localStorage","getItem","response","fetch","method","headers","concat","body","JSON","stringify","tourId","outboundFlightId","returnFlightId","roomTypeId","parseInt","ok","Error","json","breakdown","console","className","children","style","width","height","to","outboundFlights","filter","returnFlights","title","fromCity","toCity","images","src","startsWith","alt","maxHeight","objectFit","description","nightsTill","category","mealType","map","flight","onClick","cursor","airline","flightNumber","departureTime","arrivalTime","price","min","max","value","onChange","e","target","room","typeName","pricePerNight","baseServices","service","index","serviceName","fixedCost","top","outboundFlight","returnFlight","hotel","total","baseServicesTotal","idx","subtotal","agentMarkup","amount","finalTotal"],"sources":["/home/user/Desktop/code/demofront/frontend/src/pages/Agent/AgentTourView.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { toursAPI } from '../../services/api';\n\nconst AgentTourView = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const [tour, setTour] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState('');\n\n    // Selection state\n    const [selectedOutbound, setSelectedOutbound] = useState(null);\n    const [selectedReturn, setSelectedReturn] = useState(null);\n    const [selectedRoomType, setSelectedRoomType] = useState(null);\n    const [nights, setNights] = useState(7);\n\n    // Price breakdown state\n    const [priceBreakdown, setPriceBreakdown] = useState(null);\n    const [calculatingPrice, setCalculatingPrice] = useState(false);\n\n    useEffect(() => {\n        fetchTour();\n    }, [id]);\n\n    const fetchTour = async () => {\n        try {\n            setLoading(true);\n            const data = await toursAPI.getById(id);\n            setTour(data);\n\n            // Auto-select first options\n            if (data.flightVariants?.length > 0) {\n                const firstOutbound = data.flightVariants.find(f => f.type === 'outbound');\n                const firstReturn = data.flightVariants.find(f => f.type === 'return');\n                if (firstOutbound) setSelectedOutbound(firstOutbound._id);\n                if (firstReturn) setSelectedReturn(firstReturn._id);\n            }\n            if (data.hotelRoomTypes?.length > 0) {\n                setSelectedRoomType(data.hotelRoomTypes[0]._id);\n            }\n            if (data.nightsFrom) {\n                setNights(data.nightsFrom);\n            }\n        } catch (err) {\n            setError(err.message || 'Failed to load tour');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Calculate price whenever selections change\n    useEffect(() => {\n        if (tour && selectedOutbound && selectedReturn && selectedRoomType && nights > 0) {\n            calculatePrice();\n        }\n    }, [selectedOutbound, selectedReturn, selectedRoomType, nights, tour]);\n\n    const calculatePrice = async () => {\n        if (!tour || !selectedOutbound || !selectedReturn || !selectedRoomType || !nights) {\n            return;\n        }\n\n        setCalculatingPrice(true);\n        try {\n            const token = localStorage.getItem('token');\n            const response = await fetch('http://localhost:5000/api/tours/calculate-price', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`\n                },\n                body: JSON.stringify({\n                    tourId: tour._id,\n                    outboundFlightId: selectedOutbound,\n                    returnFlightId: selectedReturn,\n                    roomTypeId: selectedRoomType,\n                    nights: parseInt(nights)\n                })\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to calculate price');\n            }\n\n            const data = await response.json();\n            setPriceBreakdown(data.breakdown);\n        } catch (err) {\n            console.error('Price calculation error:', err);\n            setError('Failed to calculate price');\n        } finally {\n            setCalculatingPrice(false);\n        }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"min-vh-100 d-flex align-items-center justify-content-center\">\n                <div className=\"text-center\">\n                    <div className=\"spinner-border text-primary mb-3\" style={{ width: '3rem', height: '3rem' }}></div>\n                    <p className=\"text-muted\">Loading tour details...</p>\n                </div>\n            </div>\n        );\n    }\n\n    if (error || !tour) {\n        return (\n            <div className=\"container-fluid p-4\">\n                <div className=\"alert alert-danger\">\n                    <i className=\"fa fa-exclamation-circle me-2\"></i>{error || 'Tour not found'}\n                </div>\n                <Link to=\"/agent/tours\" className=\"btn btn-outline-secondary\">\n                    <i className=\"fa fa-arrow-left me-2\"></i>Back to Tours\n                </Link>\n            </div>\n        );\n    }\n\n    const outboundFlights = tour.flightVariants?.filter(f => f.type === 'outbound') || [];\n    const returnFlights = tour.flightVariants?.filter(f => f.type === 'return') || [];\n\n    return (\n        <div className=\"container-fluid p-4\">\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                <div>\n                    <h3 className=\"fw-bold m-0\">{tour.title}</h3>\n                    <p className=\"text-muted small mb-0\">\n                        <i className=\"fa fa-route me-2\"></i>\n                        {tour.fromCity} → {tour.toCity}\n                    </p>\n                </div>\n                <Link to=\"/agent/tours\" className=\"btn btn-outline-secondary btn-sm rounded-pill px-3\">\n                    <i className=\"fa fa-arrow-left me-2\"></i>Back to Tours\n                </Link>\n            </div>\n\n            <div className=\"row g-4\">\n                {/* Left Column: Tour Details & Selections */}\n                <div className=\"col-lg-8\">\n                    {/* Tour Information */}\n                    <div className=\"card border-0 shadow-sm rounded-4 p-4 mb-4\">\n                        <h5 className=\"fw-bold mb-3\">Tour Information</h5>\n                        {tour.images?.[0] && (\n                            <img\n                                src={tour.images[0].startsWith('http') ? tour.images[0] : `http://localhost:5000${tour.images[0]}`}\n                                alt={tour.title}\n                                className=\"img-fluid rounded-3 mb-3\"\n                                style={{ maxHeight: '300px', width: '100%', objectFit: 'cover' }}\n                            />\n                        )}\n                        <p className=\"text-muted\">{tour.description || 'No description available'}</p>\n                        <div className=\"row g-3 mt-2\">\n                            <div className=\"col-md-4\">\n                                <div className=\"p-3 bg-light rounded-3\">\n                                    <small className=\"text-muted d-block\">Nights Range</small>\n                                    <strong>{tour.nightsFrom}-{tour.nightsTill} nights</strong>\n                                </div>\n                            </div>\n                            <div className=\"col-md-4\">\n                                <div className=\"p-3 bg-light rounded-3\">\n                                    <small className=\"text-muted d-block\">Category</small>\n                                    <strong>{tour.category}★ Hotel</strong>\n                                </div>\n                            </div>\n                            <div className=\"col-md-4\">\n                                <div className=\"p-3 bg-light rounded-3\">\n                                    <small className=\"text-muted d-block\">Meal Type</small>\n                                    <strong>{tour.mealType || 'N/A'}</strong>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Flight Selection */}\n                    <div className=\"card border-0 shadow-sm rounded-4 p-4 mb-4\">\n                        <h5 className=\"fw-bold mb-3\">\n                            <i className=\"fa fa-plane text-primary me-2\"></i>Select Flights\n                        </h5>\n\n                        {/* Outbound Flights */}\n                        <div className=\"mb-4\">\n                            <label className=\"form-label fw-bold small text-uppercase text-muted\">Outbound Flight</label>\n                            <div className=\"row g-2\">\n                                {outboundFlights.map(flight => (\n                                    <div className=\"col-md-6\" key={flight._id}>\n                                        <div\n                                            className={`border rounded-3 p-3 cursor-pointer transition ${selectedOutbound === flight._id ? 'border-primary border-2 bg-primary bg-opacity-10' : 'border-secondary-subtle'}`}\n                                            onClick={() => setSelectedOutbound(flight._id)}\n                                            style={{ cursor: 'pointer' }}\n                                        >\n                                            <div className=\"d-flex justify-content-between align-items-start\">\n                                                <div>\n                                                    <div className=\"fw-bold\">{flight.airline}</div>\n                                                    <small className=\"text-muted\">{flight.flightNumber}</small><br />\n                                                    <small className=\"text-muted\">\n                                                        {flight.departureTime && flight.arrivalTime &&\n                                                            `${flight.departureTime} - ${flight.arrivalTime}`\n                                                        }\n                                                    </small>\n                                                </div>\n                                                <div className=\"text-end\">\n                                                    <div className=\"fw-bold text-primary fs-5\">${flight.price}</div>\n                                                    {selectedOutbound === flight._id && (\n                                                        <span className=\"badge bg-primary mt-1\">Selected</span>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n\n                        {/* Return Flights */}\n                        <div>\n                            <label className=\"form-label fw-bold small text-uppercase text-muted\">Return Flight</label>\n                            <div className=\"row g-2\">\n                                {returnFlights.map(flight => (\n                                    <div className=\"col-md-6\" key={flight._id}>\n                                        <div\n                                            className={`border rounded-3 p-3 cursor-pointer transition ${selectedReturn === flight._id ? 'border-success border-2 bg-success bg-opacity-10' : 'border-secondary-subtle'}`}\n                                            onClick={() => setSelectedReturn(flight._id)}\n                                            style={{ cursor: 'pointer' }}\n                                        >\n                                            <div className=\"d-flex justify-content-between align-items-start\">\n                                                <div>\n                                                    <div className=\"fw-bold\">{flight.airline}</div>\n                                                    <small className=\"text-muted\">{flight.flightNumber}</small><br />\n                                                    <small className=\"text-muted\">\n                                                        {flight.departureTime && flight.arrivalTime &&\n                                                            `${flight.departureTime} - ${flight.arrivalTime}`\n                                                        }\n                                                    </small>\n                                                </div>\n                                                <div className=\"text-end\">\n                                                    <div className=\"fw-bold text-success fs-5\">${flight.price}</div>\n                                                    {selectedReturn === flight._id && (\n                                                        <span className=\"badge bg-success mt-1\">Selected</span>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Hotel Selection */}\n                    <div className=\"card border-0 shadow-sm rounded-4 p-4 mb-4\">\n                        <h5 className=\"fw-bold mb-3\">\n                            <i className=\"fa fa-bed text-primary me-2\"></i>Select Room Type\n                        </h5>\n                        <div className=\"row g-3 mb-3\">\n                            <div className=\"col-md-6\">\n                                <label className=\"form-label fw-bold small\">Number of Nights</label>\n                                <input\n                                    type=\"number\"\n                                    className=\"form-control form-control-lg\"\n                                    min={tour.nightsFrom}\n                                    max={tour.nightsTill}\n                                    value={nights}\n                                    onChange={e => setNights(parseInt(e.target.value) || tour.nightsFrom)}\n                                />\n                                <small className=\"text-muted\">Range: {tour.nightsFrom}-{tour.nightsTill} nights</small>\n                            </div>\n                        </div>\n                        <div className=\"row g-2\">\n                            {tour.hotelRoomTypes?.map(room => (\n                                <div className=\"col-md-6\" key={room._id}>\n                                    <div\n                                        className={`border rounded-3 p-3 cursor-pointer transition ${selectedRoomType === room._id ? 'border-warning border-2 bg-warning bg-opacity-10' : 'border-secondary-subtle'}`}\n                                        onClick={() => setSelectedRoomType(room._id)}\n                                        style={{ cursor: 'pointer' }}\n                                    >\n                                        <div className=\"d-flex justify-content-between align-items-start\">\n                                            <div>\n                                                <div className=\"fw-bold\">{room.typeName}</div>\n                                                <small className=\"text-muted\">{room.description}</small>\n                                            </div>\n                                            <div className=\"text-end\">\n                                                <div className=\"fw-bold text-warning fs-6\">${room.pricePerNight}/night</div>\n                                                <small className=\"text-muted d-block\">× {nights} nights</small>\n                                                <div className=\"fw-bold text-dark\">${room.pricePerNight * nights}</div>\n                                                {selectedRoomType === room._id && (\n                                                    <span className=\"badge bg-warning text-dark mt-1\">Selected</span>\n                                                )}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n\n                    {/* Base Services */}\n                    {tour.baseServices?.length > 0 && (\n                        <div className=\"card border-0 shadow-sm rounded-4 p-4 mb-4\">\n                            <h5 className=\"fw-bold mb-3\">\n                                <i className=\"fa fa-concierge-bell text-primary me-2\"></i>Included Services\n                            </h5>\n                            <p className=\"text-muted small mb-3\">These services are always included in the tour price.</p>\n                            <div className=\"row g-2\">\n                                {tour.baseServices.map((service, index) => (\n                                    <div className=\"col-md-6\" key={index}>\n                                        <div className=\"border border-success-subtle bg-success-subtle rounded-3 p-3\">\n                                            <div className=\"d-flex justify-content-between align-items-center\">\n                                                <div>\n                                                    <div className=\"fw-bold\">{service.serviceName}</div>\n                                                    <small className=\"text-muted\">{service.description}</small>\n                                                </div>\n                                                <div className=\"fw-bold text-success\">${service.fixedCost}</div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                {/* Right Column: Price Calculator */}\n                <div className=\"col-lg-4\">\n                    <div className=\"card border-0 shadow rounded-4 p-4 sticky-top\" style={{ top: '100px' }}>\n                        <h5 className=\"fw-bold mb-4\">\n                            <i className=\"fa fa-calculator text-primary me-2\"></i>Price Breakdown\n                        </h5>\n\n                        {calculatingPrice ? (\n                            <div className=\"text-center py-4\">\n                                <div className=\"spinner-border text-primary mb-2\"></div>\n                                <p className=\"text-muted small\">Calculating price...</p>\n                            </div>\n                        ) : priceBreakdown ? (\n                            <>\n                                <div className=\"mb-3 pb-3 border-bottom\">\n                                    <div className=\"d-flex justify-content-between mb-2\">\n                                        <span className=\"text-muted small\">Outbound Flight</span>\n                                        <span className=\"fw-bold\">${priceBreakdown.outboundFlight?.price || 0}</span>\n                                    </div>\n                                    <small className=\"text-muted d-block\">{priceBreakdown.outboundFlight?.airline}</small>\n                                </div>\n\n                                <div className=\"mb-3 pb-3 border-bottom\">\n                                    <div className=\"d-flex justify-content-between mb-2\">\n                                        <span className=\"text-muted small\">Return Flight</span>\n                                        <span className=\"fw-bold\">${priceBreakdown.returnFlight?.price || 0}</span>\n                                    </div>\n                                    <small className=\"text-muted d-block\">{priceBreakdown.returnFlight?.airline}</small>\n                                </div>\n\n                                <div className=\"mb-3 pb-3 border-bottom\">\n                                    <div className=\"d-flex justify-content-between mb-2\">\n                                        <span className=\"text-muted small\">Hotel ({nights} nights)</span>\n                                        <span className=\"fw-bold\">${priceBreakdown.hotel?.total || 0}</span>\n                                    </div>\n                                    <small className=\"text-muted d-block\">\n                                        {priceBreakdown.hotel?.typeName} - ${priceBreakdown.hotel?.pricePerNight}/night\n                                    </small>\n                                </div>\n\n                                {priceBreakdown.baseServices?.length > 0 && (\n                                    <div className=\"mb-3 pb-3 border-bottom\">\n                                        <div className=\"d-flex justify-content-between mb-2\">\n                                            <span className=\"text-muted small\">Base Services</span>\n                                            <span className=\"fw-bold\">${priceBreakdown.baseServicesTotal || 0}</span>\n                                        </div>\n                                        {priceBreakdown.baseServices.map((service, idx) => (\n                                            <small key={idx} className=\"text-muted d-block\">\n                                                • {service.serviceName} (${service.fixedCost})\n                                            </small>\n                                        ))}\n                                    </div>\n                                )}\n\n                                <div className=\"mb-3 pb-3 border-bottom\">\n                                    <div className=\"d-flex justify-content-between\">\n                                        <span className=\"fw-bold\">Subtotal</span>\n                                        <span className=\"fw-bold fs-5\">${priceBreakdown.subtotal || 0}</span>\n                                    </div>\n                                </div>\n\n                                <div className=\"mb-4 pb-3 border-bottom\">\n                                    <div className=\"d-flex justify-content-between\">\n                                        <span className=\"text-success small\">\n                                            Agent Markup ({priceBreakdown.agentMarkup?.type === 'PERCENT'\n                                                ? `${priceBreakdown.agentMarkup?.value}%`\n                                                : 'Fixed'})\n                                        </span>\n                                        <span className=\"fw-bold text-success\">+${priceBreakdown.agentMarkup?.amount || 0}</span>\n                                    </div>\n                                </div>\n\n                                <div className=\"bg-primary bg-opacity-10 rounded-3 p-3 mb-4\">\n                                    <div className=\"d-flex justify-content-between align-items-center\">\n                                        <span className=\"fw-bold text-uppercase\">Final Total</span>\n                                        <span className=\"fw-bold text-primary fs-3\">${priceBreakdown.finalTotal || 0}</span>\n                                    </div>\n                                    <small className=\"text-muted d-block mt-1\">Per person</small>\n                                </div>\n\n                                <button className=\"btn btn-primary w-100 py-3 rounded-pill shadow mb-3\">\n                                    <i className=\"fa fa-ticket-alt me-2\"></i>Book This Tour\n                                </button>\n\n                                <div className=\"text-center\">\n                                    <small className=\"text-muted\">Need help? Contact support</small>\n                                </div>\n                            </>\n                        ) : (\n                            <div className=\"text-center py-4\">\n                                <i className=\"fa fa-info-circle text-muted fs-3 mb-2 opacity-25\"></i>\n                                <p className=\"text-muted small\">Select options to see price</p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n\n            <style>{`\n                .cursor-pointer { cursor: pointer; }\n                .transition { transition: all 0.3s ease; }\n                .text-primary { color: #30c39e !important; }\n                .bg-primary { background-color: #30c39e !important; }\n                .border-primary { border-color: #30c39e !important; }\n                .btn-primary { background-color: #30c39e; border-color: #30c39e; }\n                .btn-primary:hover { background-color: #28a686; border-color: #28a686; }\n            `}</style>\n        </div>\n    );\n};\n\nexport default AgentTourView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}