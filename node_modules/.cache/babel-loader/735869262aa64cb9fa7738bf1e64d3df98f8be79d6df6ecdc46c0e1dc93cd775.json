{"ast":null,"code":"import React,{useState,useEffect}from'react';import{toursAPI}from'../services/api';import TourSearchForm from'../components/AdvancedSearch/TourSearchForm';import B2BSearchResults from'../components/AdvancedSearch/B2BSearchResults';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Search=()=>{var _tabs$find,_tabs$find2;const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[activeTab,setActiveTab]=useState('tours');const{user}=useAuth();const isAgent=(user===null||user===void 0?void 0:user.role)==='agent'||(user===null||user===void 0?void 0:user.role)==='admin';useEffect(()=>{handleSearch({});},[]);const handleSearch=async filters=>{setLoading(true);setError('');try{const data=await toursAPI.getAll();setResults(data);}catch(err){setError(err.message||'Failed to fetch results');}finally{setLoading(false);}};const tabs=[{id:'tours',label:'Search Tour',icon:'fa-map-marked-alt'},{id:'hotels',label:'Hotels',icon:'fa-hotel'},{id:'tickets',label:'Tickets',icon:'fa-ticket-alt'},{id:'ranking',label:'Agency Ranking',icon:'fa-award'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"search-page \".concat(isAgent?'bg-light min-vh-100':''),children:[!isAgent&&/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid bg-primary py-5 mb-5 hero-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container py-5 text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"display-3 text-white animated slideInDown\",children:\"Qidiruv\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white opacity-75\",children:\"Sizga mos sayohatlarni toping\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isAgent?'container-fluid py-3':'container py-5'),children:[isAgent&&/*#__PURE__*/_jsx(\"div\",{className:\"search-tabs-container mb-0\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"nav nav-tabs border-0 gap-1\",children:tabs.map(tab=>/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"nav-link border-0 rounded-top-4 px-4 py-3 fw-bold transition-all \".concat(activeTab===tab.id?'active bg-white text-primary shadow-sm':'bg-light text-muted'),onClick:()=>setActiveTab(tab.id),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa \".concat(tab.icon,\" me-2\")}),tab.label]})},tab.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:activeTab==='tours'?/*#__PURE__*/_jsx(TourSearchForm,{onSearch:handleSearch}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded-4 shadow-sm text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa \".concat((_tabs$find=tabs.find(t=>t.id===activeTab))===null||_tabs$find===void 0?void 0:_tabs$find.icon,\" fa-4x text-primary opacity-10 mb-4\")}),/*#__PURE__*/_jsxs(\"h4\",{children:[(_tabs$find2=tabs.find(t=>t.id===activeTab))===null||_tabs$find2===void 0?void 0:_tabs$find2.label,\" Service\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"This specialized search module is currently under development.\"})]})})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mt-4 rounded-4 shadow-sm\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(B2BSearchResults,{results:results,loading:loading})})})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n                .nav-tabs .nav-link.active {\\n                    color: #30c39e !important;\\n                    position: relative;\\n                }\\n                .nav-tabs .nav-link.active::after {\\n                    content: '';\\n                    position: absolute;\\n                    bottom: 0;\\n                    left: 20%;\\n                    right: 20%;\\n                    height: 3px;\\n                    background: #30c39e;\\n                    border-radius: 3px 3px 0 0;\\n                }\\n                .hero-header {\\n                    background: linear-gradient(rgba(20, 20, 31, .7), rgba(20, 20, 31, .7)), url(/assets/img/bg-hero.jpg);\\n                    background-position: center center;\\n                    background-repeat: no-repeat;\\n                    background-size: cover;\\n                }\\n                .rounded-top-4 { border-radius: 12px 12px 0 0 !important; }\\n            \"})]});};export default Search;","map":{"version":3,"names":["React","useState","useEffect","toursAPI","TourSearchForm","B2BSearchResults","useAuth","jsx","_jsx","jsxs","_jsxs","Search","_tabs$find","_tabs$find2","results","setResults","loading","setLoading","error","setError","activeTab","setActiveTab","user","isAgent","role","handleSearch","filters","data","getAll","err","message","tabs","id","label","icon","className","concat","children","map","tab","onClick","onSearch","find","t"],"sources":["/home/user/Desktop/code/demofront/frontend/src/pages/Search.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { toursAPI } from '../services/api';\nimport TourSearchForm from '../components/AdvancedSearch/TourSearchForm';\nimport B2BSearchResults from '../components/AdvancedSearch/B2BSearchResults';\nimport { useAuth } from '../context/AuthContext';\n\nconst Search = () => {\n    const [results, setResults] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const [activeTab, setActiveTab] = useState('tours');\n    const { user } = useAuth();\n\n    const isAgent = user?.role === 'agent' || user?.role === 'admin';\n\n    useEffect(() => {\n        handleSearch({});\n    }, []);\n\n    const handleSearch = async (filters) => {\n        setLoading(true);\n        setError('');\n        try {\n            const data = await toursAPI.getAll();\n            setResults(data);\n        } catch (err) {\n            setError(err.message || 'Failed to fetch results');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const tabs = [\n        { id: 'tours', label: 'Search Tour', icon: 'fa-map-marked-alt' },\n        { id: 'hotels', label: 'Hotels', icon: 'fa-hotel' },\n        { id: 'tickets', label: 'Tickets', icon: 'fa-ticket-alt' },\n        { id: 'ranking', label: 'Agency Ranking', icon: 'fa-award' },\n    ];\n\n    return (\n        <div className={`search-page ${isAgent ? 'bg-light min-vh-100' : ''}`}>\n            {!isAgent && (\n                <div className=\"container-fluid bg-primary py-5 mb-5 hero-header\">\n                    <div className=\"container py-5 text-center\">\n                        <h1 className=\"display-3 text-white animated slideInDown\">Qidiruv</h1>\n                        <p className=\"text-white opacity-75\">Sizga mos sayohatlarni toping</p>\n                    </div>\n                </div>\n            )}\n\n            <div className={`${isAgent ? 'container-fluid py-3' : 'container py-5'}`}>\n                {isAgent && (\n                    <div className=\"search-tabs-container mb-0\">\n                        <ul className=\"nav nav-tabs border-0 gap-1\">\n                            {tabs.map(tab => (\n                                <li className=\"nav-item\" key={tab.id}>\n                                    <button\n                                        className={`nav-link border-0 rounded-top-4 px-4 py-3 fw-bold transition-all ${activeTab === tab.id ? 'active bg-white text-primary shadow-sm' : 'bg-light text-muted'}`}\n                                        onClick={() => setActiveTab(tab.id)}\n                                    >\n                                        <i className={`fa ${tab.icon} me-2`}></i>\n                                        {tab.label}\n                                    </button>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                )}\n\n                <div className=\"row justify-content-center\">\n                    <div className=\"col-12\">\n                        {activeTab === 'tours' ? (\n                            <TourSearchForm onSearch={handleSearch} />\n                        ) : (\n                            <div className=\"bg-white p-5 rounded-4 shadow-sm text-center\">\n                                <i className={`fa ${tabs.find(t => t.id === activeTab)?.icon} fa-4x text-primary opacity-10 mb-4`}></i>\n                                <h4>{tabs.find(t => t.id === activeTab)?.label} Service</h4>\n                                <p className=\"text-muted\">This specialized search module is currently under development.</p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                {error && <div className=\"alert alert-danger mt-4 rounded-4 shadow-sm\">{error}</div>}\n\n                <div className=\"row mt-4\">\n                    <div className=\"col-12\">\n                        <B2BSearchResults results={results} loading={loading} />\n                    </div>\n                </div>\n            </div>\n\n            <style>{`\n                .nav-tabs .nav-link.active {\n                    color: #30c39e !important;\n                    position: relative;\n                }\n                .nav-tabs .nav-link.active::after {\n                    content: '';\n                    position: absolute;\n                    bottom: 0;\n                    left: 20%;\n                    right: 20%;\n                    height: 3px;\n                    background: #30c39e;\n                    border-radius: 3px 3px 0 0;\n                }\n                .hero-header {\n                    background: linear-gradient(rgba(20, 20, 31, .7), rgba(20, 20, 31, .7)), url(/assets/img/bg-hero.jpg);\n                    background-position: center center;\n                    background-repeat: no-repeat;\n                    background-size: cover;\n                }\n                .rounded-top-4 { border-radius: 12px 12px 0 0 !important; }\n            `}</style>\n        </div>\n    );\n};\n\nexport default Search;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}